# 배드민턴 API

## 요구사항 정리

### 코치

- 배드민턴 코치는 조조, 유비, 장비, 관우로 총 4명이다.

### 레슨 예약

- 배드민턴 레슨은 1회성 레슨과 정규 레슨이 있다.
- 레슨은 다음날부터 7일 이내에만 예약이 가능하다. 만약 오늘이 6월 20일이라면 6월 21일부터 6월 27일까지 레슨을 신청할 수 있다. 모든 레슨의 당일 예약은 불가능하다.
- 배드민턴장은 월요일부터 일요일까지 오전 7시에 오픈 저녁 11시에 종료다. 즉 레슨 예약도 오전 7시부터 가능하며 마지막 레슨이 끝나는 시간도 저녁 11시까지 가능하다.
- 모든 레슨 시간은 1시간이다. 고객이 레슨을 취소하지 않을때 까지 레슨은 지속 되며 레슨 사이에 쉬는 시간은 없다.
- 코치의 레슨 시간은 겹칠 수 없다. 즉 A 코치가 무슨 요일 몇시에 일회성 레슨이 예약되었다면 그 날 다른 레슨을 예약할 수 없다.
- 정기 레슨의 경우, 만약 오늘이 6월 20일(화)이라면 6월 21일(수)부터 정기레슨이 시작된다. 예를 들어 화, 목 10시 30분 시작 레슨이라면 6월 22일 목요일 10시 30분부터 1시간 동안 레슨이 시작된다.
- 고객은 1대1 레슨만 신청할 수 있으며 정규 레슨은 주 1회, 2회, 3회까지 신청할 수 있다.
- 레슨이 예약되면 취소할 때 사용하는 id와 password를 발급해서 고객에게 전달한다.

### 레슨 일정 조회

- 코치 정보, 레슨 타입(1회, 정규)과 레슨 시간 정보를 받아 레슨 받을 수 있는 응답을 받는다.

### 레슨 취소

- 고객은 레슨 하루 전까지 레슨을 취소할 수 있다. 2월 22일 10시 레슨이라면 2월 22일 0시 이전까지 레슨을 취소할 수 있다. 즉 레슨을 하는 당일에는 취소 할 수 없다.
- 고객은 레슨 신청 시에 id와 password를 부여받아 해당 id와 password로 레슨을 취소할 수 있다.

## 기술

- Typescript, NestJS, TypeORM, MySQL을 사용한다.
- 어플리케이션 서버를 제외한 다른 DB 들은 docker를 이용한다.
- Open API 명세를 제공한다.
- 서버 실행 방법을 제공한다.
- 테스트 코드를 작성한다.
- 동시성 문제를 해결한다.

## 할것

- 삭제 기능 개발
- 테스트 코드 추가
- cache 반영
- 동시성 제어 반영
- decorator 패턴 적용
- 만약 코치가 탈퇴하면 레슨과 레슨 타임도 모두 삭제되나? cascade에 의해
- DB조회시 자식이 부모를 모르는 현상에 대해 탐구
- oneToMany 삭제시 manyToOne 삭제하려면